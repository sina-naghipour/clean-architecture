# ADR-004: Chioce of Database

**Status:** `Accepted`  
**Date:** `2025-11-29`  
**Decision Makers:** `Sina Naghipour`  

---

## Context
we have to either choose SQL or non-SQL based databases. this duality arises from the different data structure in each service.

Questions to answer here:  
- What are we trying to solve? -> storing user's data for enhancing api's interaction cycle.
- What alternatives exist?  -> storing data into files.
- Why is a decision needed now? -> because the api is does not have a `memory` of user's data so it would not be flexible to requests.

---

## Decision
we chose mongodb for our `products` service because it has more flexibility, and postgres for services like orders and auth to have data integrity and atomic approach.

Questions to answer here:  
- What approach are we taking?  -> we are using both sql and non-sql in our api because of variable data structure we have for each service.
- What technologies, patterns, or methods will be used?  -> postgres, mongodb, alembic.
- How does this decision solve the problem from the context?  -> we have srtuctured data storage which we can access in a matter of seconds.

---

## Consequences
adds headache to our maintenance but it is an unseparatable part of any program.

Questions to answer here:  
- What benefits do we gain?  -> flexibility, consistency, seperated data layer.
- What costs, risks, or limitations are introduced?  -> the cost is having a seperate component to worry about, no limitation is introduced in fact it expands the functionality of any system, not just ours.
- How does this affect future decisions or system components?  -> as we separate data layer from service layer, in the future this would act as something that could be developed separately.

---

## Alternatives Considered
saving our needed data to files.

Questions to answer here:  
- saving data to files -> this is not 1990's.

---
